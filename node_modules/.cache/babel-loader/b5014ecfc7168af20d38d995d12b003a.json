{"ast":null,"code":"import _defineProperty from\"/workspace/photogram-react-starting-point/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/workspace/photogram-react-starting-point/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/photogram-react-starting-point/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthenticationContext=/*#__PURE__*/createContext();export var AuthenticationContextProvider=function AuthenticationContextProvider(_ref){var children=_ref.children;var _useState=useState(JSON.parse(localStorage.getItem(\"currentUser\"))||null),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState({email:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),credentials=_useState4[0],setCredentials=_useState4[1];useEffect(function(){localStorage.setItem(\"currentUser\",JSON.stringify(currentUser));},[currentUser]);function handleInput(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setCredentials(function(prevCredentials){return _objectSpread(_objectSpread({},prevCredentials),{},_defineProperty({},name,value));});};function loginRequestAxios(event){event.preventDefault();// https://axios-http.com/\naxios.post(\"https://adm-photogram.herokuapp.com/users/sign_in.json\",{user:credentials}).then(function(response){setCurrentUser(response.data);console.log(response.data);});};function loginRequest(event){event.preventDefault();var url=\"https://adm-photogram.herokuapp.com/users/sign_in\";var options={method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json;charset=UTF-8\"},body:JSON.stringify({\"user\":credentials})};fetch(url,options).then(function(response){return response.json();}).then(function(data){//console.log(data);\nsetCurrentUser(data);});};return/*#__PURE__*/_jsx(AuthenticationContext.Provider,{value:{isAuthenticated:!!currentUser,currentUser:currentUser,credentials:credentials,handleInput:handleInput,loginRequest:loginRequest},children:children});};","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","AuthenticationContext","AuthenticationContextProvider","children","JSON","parse","localStorage","getItem","currentUser","setCurrentUser","email","password","credentials","setCredentials","setItem","stringify","handleInput","event","target","name","value","prevCredentials","loginRequestAxios","preventDefault","post","user","then","response","data","console","log","loginRequest","url","options","method","headers","Accept","body","fetch","json","isAuthenticated"],"sources":["/workspace/photogram-react-starting-point/src/services/authentication/authentication.context.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nexport const AuthenticationContext = createContext();\n\nexport const AuthenticationContextProvider = ({ children }) => {\n    const [currentUser, setCurrentUser] = useState(\n        JSON.parse(localStorage.getItem(\"currentUser\")) || null\n    );\n    const [credentials, setCredentials] = useState({\n        email: \"\",\n        password: \"\"\n    });\n\n    useEffect(() => {\n        localStorage.setItem(\"currentUser\", JSON.stringify(currentUser));\n    }, [currentUser])\n\n    function handleInput(event) {\n        const {name, value} = event.target;\n        setCredentials(prevCredentials => ({\n            ...prevCredentials,\n            [name]: value\n        }));\n    };\n\n    function loginRequestAxios(event) {\n        event.preventDefault();\n\n        // https://axios-http.com/\n        axios.post(\"https://adm-photogram.herokuapp.com/users/sign_in.json\", { user: credentials })\n        .then((response) => {\n            setCurrentUser(response.data);\n            console.log(response.data);\n        });\n    };\n\n    function loginRequest(event) {\n        event.preventDefault();\n\n        const url = \"https://adm-photogram.herokuapp.com/users/sign_in\";\n        const options = {\n            method: \"POST\",\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n            },\n            body: JSON.stringify({\n                \"user\": credentials \n            })\n        };\n        fetch(url, options)\n            .then((response) => response.json())\n            .then((data) => {\n                //console.log(data);\n                setCurrentUser(data);\n            });\n    };\n    \n    return (\n        <AuthenticationContext.Provider\n            value={{\n                isAuthenticated: !!currentUser,\n                currentUser, \n                credentials,\n                handleInput,\n                loginRequest \n            }}\n        >\n            {children}\n        </AuthenticationContext.Provider>        \n    );\n};"],"mappings":"8XAAA,MAAOA,MAAP,EAAgBC,aAAhB,CAA+BC,SAA/B,CAA0CC,QAA1C,KAA0D,OAA1D,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,2CAEA,MAAO,IAAMC,sBAAqB,cAAGJ,aAAa,EAA3C,CAEP,MAAO,IAAMK,8BAA6B,CAAG,QAAhCA,8BAAgC,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAC3D,cAAsCJ,QAAQ,CAC1CK,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,GAAmD,IADT,CAA9C,wCAAOC,WAAP,eAAoBC,cAApB,eAGA,eAAsCV,QAAQ,CAAC,CAC3CW,KAAK,CAAE,EADoC,CAE3CC,QAAQ,CAAE,EAFiC,CAAD,CAA9C,yCAAOC,WAAP,eAAoBC,cAApB,eAKAf,SAAS,CAAC,UAAM,CACZQ,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAoCV,IAAI,CAACW,SAAL,CAAeP,WAAf,CAApC,EACH,CAFQ,CAEN,CAACA,WAAD,CAFM,CAAT,CAIA,QAASQ,YAAT,CAAqBC,KAArB,CAA4B,CACxB,kBAAsBA,KAAK,CAACC,MAA5B,CAAOC,IAAP,eAAOA,IAAP,CAAaC,KAAb,eAAaA,KAAb,CACAP,cAAc,CAAC,SAAAQ,eAAe,wCACvBA,eADuB,wBAEzBF,IAFyB,CAElBC,KAFkB,IAAhB,CAAd,CAIH,EAED,QAASE,kBAAT,CAA2BL,KAA3B,CAAkC,CAC9BA,KAAK,CAACM,cAAN,GAEA;AACAvB,KAAK,CAACwB,IAAN,CAAW,wDAAX,CAAqE,CAAEC,IAAI,CAAEb,WAAR,CAArE,EACCc,IADD,CACM,SAACC,QAAD,CAAc,CAChBlB,cAAc,CAACkB,QAAQ,CAACC,IAAV,CAAd,CACAC,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACC,IAArB,EACH,CAJD,EAKH,EAED,QAASG,aAAT,CAAsBd,KAAtB,CAA6B,CACzBA,KAAK,CAACM,cAAN,GAEA,GAAMS,IAAG,CAAG,mDAAZ,CACA,GAAMC,QAAO,CAAG,CACZC,MAAM,CAAE,MADI,CAEZC,OAAO,CAAE,CACLC,MAAM,CAAE,kBADH,CAEL,eAAgB,gCAFX,CAFG,CAMZC,IAAI,CAAEjC,IAAI,CAACW,SAAL,CAAe,CACjB,OAAQH,WADS,CAAf,CANM,CAAhB,CAUA0B,KAAK,CAACN,GAAD,CAAMC,OAAN,CAAL,CACKP,IADL,CACU,SAACC,QAAD,QAAcA,SAAQ,CAACY,IAAT,EAAd,EADV,EAEKb,IAFL,CAEU,SAACE,IAAD,CAAU,CACZ;AACAnB,cAAc,CAACmB,IAAD,CAAd,CACH,CALL,EAMH,EAED,mBACI,KAAC,qBAAD,CAAuB,QAAvB,EACI,KAAK,CAAE,CACHY,eAAe,CAAE,CAAC,CAAChC,WADhB,CAEHA,WAAW,CAAXA,WAFG,CAGHI,WAAW,CAAXA,WAHG,CAIHI,WAAW,CAAXA,WAJG,CAKHe,YAAY,CAAZA,YALG,CADX,UASK5B,QATL,EADJ,CAaH,CAnEM"},"metadata":{},"sourceType":"module"}